#!/bin/bash

lpath() {
    echo $(dirname $(cd -P $__LPATH__;pwd)/.)/$@
}

cdlpath() {
    cd `lpath "$@"`
}

epath() {
    echo $(dirname $(cd -P $__EPATH__;pwd)/.)/$@
}

cdepath() {
    cd `epath "$@"`
}

rpath() {
    echo $(dirname $(cd -P $HOME/../;pwd)/.)/$@
}

cdrpath() {
    cd `rpath "$@"`
}

exchange() {
    if [[ -z "$1" || -z "$2" ]]; then
        echo "Missing parameters"
        return
    elif [[ -n "$1" && ! -f "$1" ]]; then
        echo "Parameter 1 is not a valid file"
        return
    elif [[ -n "$2" && ! -f "$2" ]]; then
        echo "Parameter 2 is not a valid file"
        return
    fi
    baksuffix=`date "+%s%N"`
    mv $1 $1.$baksuffix && mv $2 $1 && mv $1.$baksuffix $2
}

qcmp() {
    eval "mvn archetype:generate -DinteractiveMode=false -DarchetypeArtifactId=${3:-maven-archetype-quickstart} -DgroupId=${1:-} -DartifactId=${2:-}"
}

curls() {
    curl $@ | node <<< "var o = $(cat); console.log(JSON.stringify(o, null, 4));"
}

cnpm() {
    eval "npm --registry=https://registry.npm.taobao.org \
--cache=$HOME/.npm/.cache/cnpm \
--disturl=https://npm.taobao.org/dist \
--userconfig=$HOME/.cnpmrc" "$@"
}

md5() {
    echo -n "$*" | md5sum | cut -d ' ' -f1
}

MD5() {
    md5 $* | tr 'a-z' 'A-Z'
}
